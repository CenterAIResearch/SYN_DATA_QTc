# Set conda environment

sdv package is required.

```bash
conda env create -f environment.yml
conda activate synthcity
```

# Section 1: Find the best synthetic data generator based on the metrics

- Please use this google drive [link](https://drive.google.com/drive/folders/1x4E2VXSZmM7Nfsf7HKkeDOaRocCo52Z8?usp=drive_link) to use the colab notebooks.
- In Google Drive, in the `Sec_1_Find_Best_SYN_Data_Gen_Method`folder:

  - Run `SDV_Synthesize_a_table_(GC_CTGAN_TVAE)_QTc_replacement_sampling.ipynb`

  - Generate synthetic data using each method.
  - Download the generated data to the `Section_1/Syn_Data_by_methods` folder on your local machine.

- In Google Drive, in the `Sec_1_Find_Best_SYN_Data_Gen_Method` folder:

  - Run `Synthcity_Synthesize_a_table_(BN_RTVAE_DDPM)_QTc_replacement_sampling.ipynb`
  - Generate synthetic data using each method.
  - Download the generated data to the `Section_1/Syn_Data_by_methods` folder on the local machine.

- run the `Section_1/Generate_Metrics.py` to generate the metrics of the synthetic data generated by each method.
- run the `Section_1/draw_Boxplots.py`.
- run the `Section_1/draw_Tables_CIs.py`.
- Analyze the box plots, tables, and confidence intervals created in the png_files to select the best synthetic data generator based on the metrics among the methods.

# Section 2: Conduct machine learning experiments

- Comparison of Models Trained on Original Data vs. Synthetic Data

  - Please use this google drive [link](https://drive.google.com/drive/folders/1x4E2VXSZmM7Nfsf7HKkeDOaRocCo52Z8?usp=drive_link) to use the colab notebooks.
  - If the best synthetic data generator is one of BN, RTVAE, or DDPM, then:

    - In Google Drive, in the `Sec_2_Gen_SYN_Data_for_ML_task` folder:
      - Run `Synthcity_Synthesize_a_table_(BN)_QTc_replacement_sampling_ML_task.ipynb`.
    - Download the generated data folder to the `Section_2/Syn_Data_for_ML_task` folder in the local repository PSB2025_Reproduction.
    - Each generated dataset csv will contain an increasing number of data points in increments of 500 (e.g., 500 data points, 1000 data points, etc.), resulting in a total of 10 CSV files.
    - Run Aliro.
    - Upload each dataset below to Aliro and train the models. After training various models, Compare models trained on original data vs. synthetic data.
      - DATAPOOL_z_tr/newz_train.csv: The original data.
      - Section_2/Syn_Data_for_ML_task: Please locate the folder containing the synthetic data generated by the best synthetic data generator.
    - Save the pickle files of the best-performing models trained on original data and the best-performing models trained on synthetic data in the `Section_2/Models_pkl` folder.
    - 이 pickle파일들을 Aliro의 machine 폴더로 옮깁니다.
    - 동시에 test_model_newz_individual_model.py 또한 machine 폴더로 옮깁니다.
    - 각 pickle 파일을 사용하여 test_model_newz_individual_model.py를 실행하여 모델의 성능을 평가합니다. 이 성능은 csv파일에 저장됩니다.
      - 필요한 경우 combine_results.py, drop_wrong_row_results.py, edit_model_name_results.py를 실행하여 결과를 편집합니다.
    - 이렇게 생성된 결과 csv를 사용하여 fig_5.py를 실행하여 결과를 시각화합니다.

  - If the best synthetic data generator is one of GC, CTGAN, or TVAE, then 인 경우!!!

- Comparison of Models Trained on Original Data vs. Combined Original and Synthetic Data
